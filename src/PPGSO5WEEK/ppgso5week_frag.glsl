#version 150
// A texture is expected as program attribute


// The vertex shader fill feed this input
in vec2 FragTexCoord;

// The final color
out vec4 FragmentColor;

uniform sampler2D Texture;

void main() {
    /*
    float[25] mat = float[] (   0.0030, 0.0133, 0.0219, 0.0133, 0.0030,
                                    0.0133, 0.0596, 0.0983, 0.0596, 0.0133,
                                    0.0219, 0.0983, 0.1621, 0.0983, 0.0219,
                                    0.0030, 0.0133, 0.0219, 0.0133, 0.0030,
                                    0.0133, 0.0596, 0.0983, 0.0596, 0.0133);
        */
        /*
        float[25] mat = float[] (   0., 0., -2., 0., 0.,
                                    0., -2., 1., -2., 0.,
                                    -2., 1., 13, 1., -2.,
                                    0., -2., 1., -2., 0.,
                                    0., 0., -2., 0., 0.);
        */
        /*

     */
     float[961] mat = float[] (	    0.000001,	0.000001,	0.000002,	0.000004,	0.000006,	0.00001	,	0.000014,	0.00002	,	0.000027,	0.000035,	0.000044,	0.000052,	0.00006	,	0.000066,	0.00007	,	0.000072,	0.00007	,	0.000066,	0.00006	,	0.000052,	0.000044,	0.000035,	0.000027,	0.00002	,	0.000014,	0.00001	,	0.000006,	0.000004,	0.000002,	0.000001,	0.000001,
                                         0.000001,	0.000003,	0.000004,	0.000007,	0.000011,	0.000017,	0.000025,	0.000036,	0.000048,	0.000062,	0.000078,	0.000093,	0.000107,	0.000118,	0.000125,	0.000128,	0.000125,	0.000118,	0.000107,	0.000093,	0.000078,	0.000062,	0.000048,	0.000036,	0.000025,	0.000017,	0.000011,	0.000007,	0.000004,	0.000003,	0.000001,
                                         0.000002,	0.000004,	0.000008,	0.000012,	0.00002	,	0.00003	,	0.000044,	0.000061,	0.000083,	0.000107,	0.000133,	0.000159,	0.000183,	0.000203,	0.000215,	0.000219,	0.000215,	0.000203,	0.000183,	0.000159,	0.000133,	0.000107,	0.000083,	0.000061,	0.000044,	0.00003	,	0.00002	,	0.000012,	0.000008,	0.000004,	0.000002,
                                         0.000004,	0.000007,	0.000012,	0.00002	,	0.000032,	0.000049,	0.000072,	0.000101,	0.000136,	0.000176,	0.000219,	0.000262,	0.000302,	0.000333,	0.000354,	0.000361,	0.000354,	0.000333,	0.000302,	0.000262,	0.000219,	0.000176,	0.000136,	0.000101,	0.000072,	0.000049,	0.000032,	0.00002	,	0.000012,	0.000007,	0.000004,
                                         0.000006,	0.000011,	0.00002	,	0.000032,	0.000051,	0.000078,	0.000114,	0.000159,	0.000215,	0.000279,	0.000347,	0.000415,	0.000477,	0.000527,	0.00056	,	0.000571,	0.00056	,	0.000527,	0.000477,	0.000415,	0.000347,	0.000279,	0.000215,	0.000159,	0.000114,	0.000078,	0.000051,	0.000032,	0.00002	,	0.000011,	0.000006,
                                         0.00001	,	0.000017,	0.00003	,	0.000049,	0.000078,	0.000118,	0.000173,	0.000242,	0.000327,	0.000423,	0.000527,	0.000631,	0.000725,	0.000801,	0.000851,	0.000868,	0.000851,	0.000801,	0.000725,	0.000631,	0.000527,	0.000423,	0.000327,	0.000242,	0.000173,	0.000118,	0.000078,	0.000049,	0.00003	,	0.000017,	0.00001,
                                         0.000014,	0.000025,	0.000044,	0.000072,	0.000114,	0.000173,	0.000252,	0.000354,	0.000477,	0.000618,	0.00077	,	0.000921,	0.001059,	0.00117	,	0.001242,	0.001267,	0.001242,	0.00117	,	0.001059,	0.000921,	0.00077	,	0.000618,	0.000477,	0.000354,	0.000252,	0.000173,	0.000114,	0.000072,	0.000044,	0.000025,	0.000014,
                                         0.00002	,	0.000036,	0.000061,	0.000101,	0.000159,	0.000242,	0.000354,	0.000497,	0.00067	,	0.000868,	0.001081,	0.001293,	0.001486,	0.001642,	0.001743,	0.001779,	0.001743,	0.001642,	0.001486,	0.001293,	0.001081,	0.000868,	0.00067	,	0.000497,	0.000354,	0.000242,	0.000159,	0.000101,	0.000061,	0.000036,	0.00002,
                                         0.000027,	0.000048,	0.000083,	0.000136,	0.000215,	0.000327,	0.000477,	0.00067	,	0.000903,	0.00117	,	0.001457,	0.001743,	0.002004,	0.002215,	0.002351,	0.002398,	0.002351,	0.002215,	0.002004,	0.001743,	0.001457,	0.00117	,	0.000903,	0.00067	,	0.000477,	0.000327,	0.000215,	0.000136,	0.000083,	0.000048,	0.000027,
                                         0.000035,	0.000062,	0.000107,	0.000176,	0.000279,	0.000423,	0.000618,	0.000868,	0.00117	,	0.001516,	0.001888,	0.002259,	0.002597,	0.00287	,	0.003047,	0.003108,	0.003047,	0.00287	,	0.002597,	0.002259,	0.001888,	0.001516,	0.00117	,	0.000868,	0.000618,	0.000423,	0.000279,	0.000176,	0.000107,	0.000062,	0.000035,
                                         0.000044,	0.000078,	0.000133,	0.000219,	0.000347,	0.000527,	0.00077	,	0.001081,	0.001457,	0.001888,	0.002351,	0.002813,	0.003234,	0.003573,	0.003793,	0.00387	,	0.003793,	0.003573,	0.003234,	0.002813,	0.002351,	0.001888,	0.001457,	0.001081,	0.00077	,	0.000527,	0.000347,	0.000219,	0.000133,	0.000078,	0.000044,
                                         0.000052,	0.000093,	0.000159,	0.000262,	0.000415,	0.000631,	0.000921,	0.001293,	0.001743,	0.002259,	0.002813,	0.003366,	0.00387	,	0.004275,	0.004539,	0.00463	,	0.004539,	0.004275,	0.00387	,	0.003366,	0.002813,	0.002259,	0.001743,	0.001293,	0.000921,	0.000631,	0.000415,	0.000262,	0.000159,	0.000093,	0.000052,
                                         0.00006	,	0.000107,	0.000183,	0.000302,	0.000477,	0.000725,	0.001059,	0.001486,	0.002004,	0.002597,	0.003234,	0.00387	,	0.004449,	0.004916,	0.005219,	0.005324,	0.005219,	0.004916,	0.004449,	0.00387	,	0.003234,	0.002597,	0.002004,	0.001486,	0.001059,	0.000725,	0.000477,	0.000302,	0.000183,	0.000107,	0.00006,
                                         0.000066,	0.000118,	0.000203,	0.000333,	0.000527,	0.000801,	0.00117	,	0.001642,	0.002215,	0.00287	,	0.003573,	0.004275,	0.004916,	0.005431,	0.005765,	0.005882,	0.005765,	0.005431,	0.004916,	0.004275,	0.003573,	0.00287	,	0.002215,	0.001642,	0.00117	,	0.000801,	0.000527,	0.000333,	0.000203,	0.000118,	0.000066,
                                         0.00007	,	0.000125,	0.000215,	0.000354,	0.00056	,	0.000851,	0.001242,	0.001743,	0.002351,	0.003047,	0.003793,	0.004539,	0.005219,	0.005765,	0.006121,	0.006244,	0.006121,	0.005765,	0.005219,	0.004539,	0.003793,	0.003047,	0.002351,	0.001743,	0.001242,	0.000851,	0.00056	,	0.000354,	0.000215,	0.000125,	0.00007,
                                         0.000072,	0.000128,	0.000219,	0.000361,	0.000571,	0.000868,	0.001267,	0.001779,	0.002398,	0.003108,	0.00387	,	0.00463	,	0.005324,	0.005882,	0.006244,	0.00637	,	0.006244,	0.005882,	0.005324,	0.00463	,	0.00387	,	0.003108,	0.002398,	0.001779,	0.001267,	0.000868,	0.000571,	0.000361,	0.000219,	0.000128,	0.000072,
                                         0.00007	,	0.000125,	0.000215,	0.000354,	0.00056	,	0.000851,	0.001242,	0.001743,	0.002351,	0.003047,	0.003793,	0.004539,	0.005219,	0.005765,	0.006121,	0.006244,	0.006121,	0.005765,	0.005219,	0.004539,	0.003793,	0.003047,	0.002351,	0.001743,	0.001242,	0.000851,	0.00056	,	0.000354,	0.000215,	0.000125,	0.00007,
                                         0.000066,	0.000118,	0.000203,	0.000333,	0.000527,	0.000801,	0.00117	,	0.001642,	0.002215,	0.00287	,	0.003573,	0.004275,	0.004916,	0.005431,	0.005765,	0.005882,	0.005765,	0.005431,	0.004916,	0.004275,	0.003573,	0.00287	,	0.002215,	0.001642,	0.00117	,	0.000801,	0.000527,	0.000333,	0.000203,	0.000118,	0.000066,
                                         0.00006	,	0.000107,	0.000183,	0.000302,	0.000477,	0.000725,	0.001059,	0.001486,	0.002004,	0.002597,	0.003234,	0.00387	,	0.004449,	0.004916,	0.005219,	0.005324,	0.005219,	0.004916,	0.004449,	0.00387	,	0.003234,	0.002597,	0.002004,	0.001486,	0.001059,	0.000725,	0.000477,	0.000302,	0.000183,	0.000107,	0.00006,
                                         0.000052,	0.000093,	0.000159,	0.000262,	0.000415,	0.000631,	0.000921,	0.001293,	0.001743,	0.002259,	0.002813,	0.003366,	0.00387	,	0.004275,	0.004539,	0.00463	,	0.004539,	0.004275,	0.00387	,	0.003366,	0.002813,	0.002259,	0.001743,	0.001293,	0.000921,	0.000631,	0.000415,	0.000262,	0.000159,	0.000093,	0.000052,
                                         0.000044,	0.000078,	0.000133,	0.000219,	0.000347,	0.000527,	0.00077	,	0.001081,	0.001457,	0.001888,	0.002351,	0.002813,	0.003234,	0.003573,	0.003793,	0.00387	,	0.003793,	0.003573,	0.003234,	0.002813,	0.002351,	0.001888,	0.001457,	0.001081,	0.00077	,	0.000527,	0.000347,	0.000219,	0.000133,	0.000078,	0.000044,
                                         0.000035,	0.000062,	0.000107,	0.000176,	0.000279,	0.000423,	0.000618,	0.000868,	0.00117	,	0.001516,	0.001888,	0.002259,	0.002597,	0.00287	,	0.003047,	0.003108,	0.003047,	0.00287	,	0.002597,	0.002259,	0.001888,	0.001516,	0.00117	,	0.000868,	0.000618,	0.000423,	0.000279,	0.000176,	0.000107,	0.000062,	0.000035,
                                         0.000027,	0.000048,	0.000083,	0.000136,	0.000215,	0.000327,	0.000477,	0.00067	,	0.000903,	0.00117	,	0.001457,	0.001743,	0.002004,	0.002215,	0.002351,	0.002398,	0.002351,	0.002215,	0.002004,	0.001743,	0.001457,	0.00117	,	0.000903,	0.00067	,	0.000477,	0.000327,	0.000215,	0.000136,	0.000083,	0.000048,	0.000027,
                                         0.00002	,	0.000036,	0.000061,	0.000101,	0.000159,	0.000242,	0.000354,	0.000497,	0.00067	,	0.000868,	0.001081,	0.001293,	0.001486,	0.001642,	0.001743,	0.001779,	0.001743,	0.001642,	0.001486,	0.001293,	0.001081,	0.000868,	0.00067	,	0.000497,	0.000354,	0.000242,	0.000159,	0.000101,	0.000061,	0.000036,	0.00002,
                                         0.000014,	0.000025,	0.000044,	0.000072,	0.000114,	0.000173,	0.000252,	0.000354,	0.000477,	0.000618,	0.00077	,	0.000921,	0.001059,	0.00117	,	0.001242,	0.001267,	0.001242,	0.00117	,	0.001059,	0.000921,	0.00077	,	0.000618,	0.000477,	0.000354,	0.000252,	0.000173,	0.000114,	0.000072,	0.000044,	0.000025,	0.000014,
                                         0.00001	,	0.000017,	0.00003	,	0.000049,	0.000078,	0.000118,	0.000173,	0.000242,	0.000327,	0.000423,	0.000527,	0.000631,	0.000725,	0.000801,	0.000851,	0.000868,	0.000851,	0.000801,	0.000725,	0.000631,	0.000527,	0.000423,	0.000327,	0.000242,	0.000173,	0.000118,	0.000078,	0.000049,	0.00003	,	0.000017,	0.00001,
                                         0.000006,	0.000011,	0.00002	,	0.000032,	0.000051,	0.000078,	0.000114,	0.000159,	0.000215,	0.000279,	0.000347,	0.000415,	0.000477,	0.000527,	0.00056	,	0.000571,	0.00056	,	0.000527,	0.000477,	0.000415,	0.000347,	0.000279,	0.000215,	0.000159,	0.000114,	0.000078,	0.000051,	0.000032,	0.00002	,	0.000011,	0.000006,
                                         0.000004,	0.000007,	0.000012,	0.00002	,	0.000032,	0.000049,	0.000072,	0.000101,	0.000136,	0.000176,	0.000219,	0.000262,	0.000302,	0.000333,	0.000354,	0.000361,	0.000354,	0.000333,	0.000302,	0.000262,	0.000219,	0.000176,	0.000136,	0.000101,	0.000072,	0.000049,	0.000032,	0.00002	,	0.000012,	0.000007,	0.000004,
                                         0.000002,	0.000004,	0.000008,	0.000012,	0.00002	,	0.00003	,	0.000044,	0.000061,	0.000083,	0.000107,	0.000133,	0.000159,	0.000183,	0.000203,	0.000215,	0.000219,	0.000215,	0.000203,	0.000183,	0.000159,	0.000133,	0.000107,	0.000083,	0.000061,	0.000044,	0.00003	,	0.00002	,	0.000012,	0.000008,	0.000004,	0.000002,
                                         0.000001,	0.000003,	0.000004,	0.000007,	0.000011,	0.000017,	0.000025,	0.000036,	0.000048,	0.000062,	0.000078,	0.000093,	0.000107,	0.000118,	0.000125,	0.000128,	0.000125,	0.000118,	0.000107,	0.000093,	0.000078,	0.000062,	0.000048,	0.000036,	0.000025,	0.000017,	0.000011,	0.000007,	0.000004,	0.000003,	0.000001,
                                         0.000001,	0.000001,	0.000002,	0.000004,	0.000006,	0.00001	,	0.000014,	0.00002	,	0.000027,	0.000035,	0.000044,	0.000052,	0.00006	,	0.000066,	0.00007	,	0.000072,	0.00007	,	0.000066,	0.00006	,	0.000052,	0.000044,	0.000035,	0.000027,	0.00002	,	0.000014,	0.00001	,	0.000006,	0.000004,	0.000002,	0.000001,	0.000001);
    float div = 1.0;
    vec4 bias = vec4(0.0,0.0,0.0,1.);
    vec4 sum = vec4(0.0,0.0,0.0,0.0);
   for (int i=0; i<31; i++) {
      for(int j=0; j<31; j++) {
         vec2 shift = vec2 (i-15,j-15)/512.0;
         sum += mat[i+(j*31)]*texture(Texture,FragTexCoord+shift);
      }
   }
   FragmentColor = sum/div + bias ;

}
